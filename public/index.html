<!doctype html>

<head>

	<link rel="stylesheet" href="/css/style.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>

	<script src="/js/d3.v2.js"></script>
	<script src="/js/rickshaw.min.js"></script>
</head>
<h1>Committing!</h1>
<body>
	<div id="chart_container">
		<div id="y_axis"></div>
		<div id="chart"></div>
	</div>
	<div id="legend"></div>

	<script>
	var palette = new Rickshaw.Color.Palette( );

	var graph;

	graph = new Rickshaw.Graph.Ajax( {
		element: document.getElementById("chart"),
		width: 1200,
		height: 600,
		renderer: 'line',
		min: 'auto',
		interpolation: 'linear',
		stroke: true,
		dataURL: '/commits/rickshaw',
		onData: function(data) { 
			for (var d in data) {
				data[d].color = palette.color();
			}

			return data;
		},
		onComplete: function(transport) {
			var x_axis = new Rickshaw.Graph.Axis.Time({
				graph: transport.graph
			});
			x_axis.graph.update();

			var legend = new Rickshaw.Graph.Legend( {
				element: document.querySelector('#legend'),
				graph: transport.graph
			});
			legend.graph.update();
		}
	});
	</script>
</body>
